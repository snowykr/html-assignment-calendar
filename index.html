<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#f2f2f7">
    <title>Ë™≤È°åÁÆ°ÁêÜ„Ç¢„Éó„É™</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Suppress Tailwind CDN warning in development
        if (typeof window !== 'undefined') {
            const originalWarn = console.warn;
            console.warn = function(...args) {
                if (args[0] && args[0].includes && args[0].includes('cdn.tailwindcss.com')) {
                    return;
                }
                originalWarn.apply(console, args);
            };
        }
    </script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <div class="app-container">
                <div class="main-content-area">
                    <div class="tab-content active" id="calendar-tab">
                        <div class="content">
                            <div class="calendar-section">
                                <div class="calendar-header">
                                    <button onclick="app.navigateWeek(-1)">&#9664;</button> <span class="calendar-title" id="calendar-month-year"></span>
                                    <button onclick="app.navigateWeek(1)">&#9654;</button> </div>
                                <div class="calendar-grid" id="calendar-days-header">
                                    </div>
                                <div class="calendar-grid" id="calendar-grid-main">
                                    </div>
                            </div>
                            
                            <div class="filter-section">
                                <div class="filter-row">
                                    <span class="filter-label">ÊèêÂá∫Ê∏à„ÅøË™≤È°å„ÇíÈö†„Åô</span>
                                    <div class="toggle-switch" id="filter-unsubmitted-toggle" onclick="app.toggleFilterUnsubmitted(this)">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                                <div class="filter-row"> 
                                    <span class="filter-label">ÊúüÈôêÂàá„ÇåË™≤È°å„ÇíÈö†„Åô</span>
                                    <div class="toggle-switch off" id="filter-overdue-toggle" onclick="app.toggleFilterOverdue(this)">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="assignments-list" id="calendar-assignments-list">
                                </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="subjects-tab">
                        <div class="content">
                            <div class="filter-section" id="subjects-filter-section">
                                <div class="filter-row">
                                    <span class="filter-label">ÊúüÈôêÂàá„ÇåË™≤È°å„ÇíÈö†„Åô</span>
                                    <div class="toggle-switch off" id="filter-overdue-subjects-toggle" onclick="app.toggleFilterOverdueInSubjects(this)">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="subjects-list" id="subjects-list-container">
                                </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="settings-tab">
                        <div class="content">
                            <div class="filter-section">
                                <div class="filter-row">
                                    <span class="filter-label">ÏïåÎ¶º ÏÑ§Ï†ï</span>
                                    <div class="toggle-switch off">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                                <div class="filter-row">
                                    <span class="filter-label">Îã§ÌÅ¨ Î™®Îìú</span>
                                    <div class="toggle-switch off">
                                        <div class="toggle-slider"></div>
                                    </div>
                                </div>
                                <div class="filter-row">
                                    <span class="filter-label">Ïñ∏Ïñ¥ ÏÑ§Ï†ï</span>
                                    <select class="form-select" style="width: 120px; margin-left: auto;" aria-label="Ïñ∏Ïñ¥ ÏÑ§Ï†ï">
                                        <option>ÌïúÍµ≠Ïñ¥</option>
                                        <option>English</option>
                                        <option>Êó•Êú¨Ë™û</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Floating Add Button -->
                <button class="floating-add-button" onclick="app.openAddAssignmentModal()" title="Ë™≤È°å„ÇíËøΩÂä†">
                    <span class="add-icon">+</span>
                </button>

                <div class="bottom-tabs">
                    <button class="tab-button active" onclick="app.switchTab('calendar', this)">
                        <span class="tab-icon">üìÖ</span>
                        <span>„Ç´„É¨„É≥„ÉÄ„Éº</span>
                    </button>
                    <button class="tab-button" onclick="app.switchTab('subjects', this)">
                        <span class="tab-icon">üìö</span>
                        <span>ÁßëÁõÆ</span>
                    </button>
                    <button class="tab-button" onclick="app.switchTab('settings', this)">
                        <span class="tab-icon">‚öôÔ∏è</span>
                        <span>Ë®≠ÂÆö</span>
                    </button>
                </div>
    </div>

    <div id="assignment-popup" class="popup-modal">
        <div class="popup-content">
            <div class="popup-header">
                <h3 id="popup-date-title">Ë™≤È°å</h3>
                <button class="popup-close" onclick="app.closeAssignmentsPopup()">&times;</button>
            </div>
            <div id="popup-assignment-list"> 
                </div>
        </div>
    </div>

    <!-- Add Assignment Modal -->
    <div id="add-assignment-modal" class="popup-modal">
        <div class="popup-content">
            <div class="popup-header">
                <h3>Ë™≤È°å„ÇíËøΩÂä†</h3>
                <button class="popup-close" onclick="app.closeAddAssignmentModal()">&times;</button>
            </div>
            <form id="add-assignment-form" onsubmit="app.handleAddAssignment(event)">
                <div class="form-group">
                    <label class="form-label" for="course-name">ÁßëÁõÆÂêç</label>
                    <input type="text" id="course-name" name="courseName" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="round">ÂõûÊ¨°</label>
                    <input type="text" id="round" name="round" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="title">Ë™≤È°å„Çø„Ç§„Éà„É´</label>
                    <input type="text" id="title" name="title" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="due-date">Á∑†ÂàáÊó•</label>
                    <input type="date" id="due-date" name="dueDate" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="due-time">Á∑†ÂàáÊôÇÂàª</label>
                    <input type="time" id="due-time" name="dueTime" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="platform">„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†</label>
                    <select id="platform" name="platform" class="form-select" required>
                        <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                        <option value="teams">Teams</option>
                        <option value="openlms">OpenLMS</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn-submit">ËøΩÂä†</button>
                    <button type="button" class="btn-cancel" onclick="app.closeAddAssignmentModal()">„Ç≠„É£„É≥„Çª„É´</button>
                </div>
            </form>
        </div>
    </div>

    <script type="module" src="js/app.js?v=1.0.1"></script>
</body>
</html>
